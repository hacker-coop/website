{#-
License: MIT
(C)2020 by L3D <l3d@c3woc.de>
Source: https://github.com/c3woc/c3woc-podcast.git
-#}
{%- set search = "podcast" -%}
{%- set podcasttitle = "WTF eG Podcast" -%}
{%- set podcastdescribtion = "Der Podcast der Werkkooperative der Technikfreundinnen e.G." -%}
{%- set podcastsubtitle = "Der Podcast der Werkkooperative der Technikfreundinnen e.G." -%}
{%- set podcastsummary = "Der Podcast der Werkkooperative der Technikfreundinnen e.G." -%}
{%- set podcastauthor = "Vebit e.V. and Members" -%}
{%- set podcastemail = "vorstand@vebit.xyz" -%}
{%- set podcastxml = "/podcast/wtf.xml" -%}
{%- set podcastkeywords = "WTF, Hacker, CCC, COOP" -%}
{%- set podcastkategory = "Technolog" -%}
{%- set podcastlanguage = "de-DE" -%}
{%- set podcastlogassetimagepath = "/images/wtf.png" -%}

<?xml version="1.0" encoding="UTF-8"?>
{#- custom CSS fuer das XML... -#}
<?xml-stylesheet href="{{ '/css/xml.css'|asseturl }}" type="text/css" ?>
<rss version="2.0"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd"
	xmlns:psc="http://podlove.org/simple-chapters"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:fh="http://purl.org/syndication/history/1.0" >
  <channel>
    <title type="text">{{ podcasttitle }}</title>
    <link>{{ '/'|url(external=true) }}{{ search }}/</link>
    <description>
        {{ podcastdescribtion }}
    </description>
    <lastBuildDate>{{ none|datetimeformat('YYYY-MM-ddThh:mm:ss') }}Z</lastBuildDate>
    <image><url>{{ podcastlogassetimagepath|url(external=true) }}</url><title>{{ podcasttitle }}</title><link>{{ '/'|url(external=true) }}{{ search }}/</link></image>
    <atom:link rel="self" type="application/rss+xml"	title="{{ podcasttitle }}"	href="{{ podcastxml|url(external=true) }}" />
    <atom:link rel="first" type="application/rss+xml"	href="{{ podcastxml|url(external=true) }}" />
    <atom:contributor><atom:name>{{ podcastauthor }}</atom:name></atom:contributor>
    <language>{{ podcastlanguage }}</language>
    <copyright>>&#169; 2020 {{ podcastauthor }}</copyright>
    <itunes:author class="itunes_author">{{ podcastauthor }}</itunes:author>
    <itunes:type class="itunes_serial">serial</itunes:type>
    <itunes:owner class="itunes_owner">
      <itunes:name>{{ podcastauthor }}</itunes:name>
      <itunes:email>{{ podcastemail }}</itunes:email>
    </itunes:owner>
    <itunes:image href="{{ '/'|url(external=true) }}/images/podcast.itunes.svg.png" class="itunes_feed_image"></itunes:image>
    <id>{{ podcastxml|url(external=true) }}</id>
    <itunes:category text="Education">
      <itunes:category text="Technology"/>
      <itunes:category text="Science"/>
    </itunes:category>
    <itunes:explicit class="itunes_explicit">no</itunes:explicit>
    <generator>Von Hand als Jinja2 Template von L3D geschrieben</generator>
    <updated>{{ none|datetimeformat('YYYY-MM-ddThh:mm:ss') }}Z</updated>
    <pubDate>1980-01-01T00:42:23Z</pubDate>
    <itunes:subtitle class="itunes_subtitle">{{ podcastsubtitle }}</itunes:subtitle>
{#  #}    <itunes:summary class="itunes_summary">
            {{ podcastsummary }}
          </itunes:summary>
{#  #}    <itunes:keywords class="itunes_keywords">
            {{ podcastkeywords }}
          </itunes:keywords>
{#  #}    <itunes:new-feed-url class="itunes_new-feed-url">{{ podcastxml|url(external=true) }}</itunes:new-feed-url>
{#  #}    <itunes:block class="itunes_block">no</itunes:block>
{#  #}    <itunes:category text="Technology">{{ podcastkategory }}</itunes:category>
      {%- set pages = site.query( '/podcast' ).include_undiscoverable(true).all() -%}
      {%- set firstrun = true %}
      {%- for page in pages -%}
        {%- if not page._hidden %}
{#  #}    <item>
{#  #}      <title>{{ page.title }}</title>
{#  #}      <link>{{ '/'|url(external=true) }}{{ search }}/{{ page._id }}/</link>
{#  #}      <author class="itunes_author">
              {%- if page.author -%}
                {{ page.author }}
              {%- else -%}
                {{ podcastauthor }}
              {%- endif -%}
            </author>
{#        <pubDate>{{ page.pub_date|datetimeformat('YYYY-MM-ddThh:mm:ss') }}Z</pubDate>
  #}      <enclosure url="{{ '/'|url(external=true) }}{{ search }}/{{ page._id }}/{{ page.podcastmp3 }}" type="audio/mpeg" length="{{ page.mp3leng }}"/>
{#  #}      <guid isPermaLink="false">{{ page._id }}</guid>
{#  #}      <download>{{ '/'|url(external=true) }}{{ search }}/{{ page._id }}/{{ page.podcastmp3 }}</download>
{#  #}      <itunes:explicit class="itunes_explicit">no</itunes:explicit>
{#  #}      <content type="html">
              {{ page.xml }}
            {%- if page.xml_img -%}
              &lt;img width=&quot;23%&quot; src=&quot;{{ page.xml_img }}&quot; /&gt;
            {% endif %}
              &lt;br/&gt;&lt;a href="{{ page|url(external=true) }}{{ page.podcastmp3 }}" download&gt;
                {%- if page.podcasttitle %}
                  {{ page.podcasttitle }}
                {%- else -%}
                  Download Podcast
                {%- endif -%}
                &lt;/a&gt;
{#  #}      </content>
{#  #}    </item>
        {%- endif %}
      {%- endfor %}
  </channel>
</rss>
